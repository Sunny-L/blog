<%- contentFor('body')%>
  <div class="page page-login">
    <section>
      <form action="#" method="POST" onsubmit="return asubmit();">
        <label for="username">邮箱</label>
        <input type="text" name="username" value=""><br>
        <label for="password">密码</label>
        <input type="text" name="password" value=""><br>
        <button type="submit" class="btn btn-default">登录</button>
      </form>
    </section>
  </div>
  <%- contentFor('footer')%>
    <script>
      function asubmit(e){
        var username = document.querySelector('input[name=username]').value
        var password = document.querySelector('input[name=password]').value
        fetch('/admin/login',{
          method: 'POST',
          credentials: 'include',
          headers: {"Content-Type": "application/json"},
          body: JSON.stringify({username: username,password: password})
        }).then(res => res.json())
        .then(data => {
            if(data.code === 0) {
              window.location = '/admin'
            }else {
              alert(data.info)
            }
          })
          return false
      }
      
    </script>